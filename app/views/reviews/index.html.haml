.anime-discover.anime-show.anime-show-full
  .row
    .three.columns
      = render partial: 'anime/card', locals: {data: [@anime, @watchlist, 'twelve']}

    .nine.columns
      .panel 
        %h4= title "#{@anime.title} Reviews"
        %a{"data-reveal-id" => "submit-review", :href => "#"}
          %span= "Write a review for #{@anime.title}"

      - @reviews.each do |review|
        .panel
          %h5 #{review.user.name} <small>#{review.positive? ? ':)' : ':('}</small>
          %p(style="whitespace: pre-wrap")= truncate(review.content, length: 600, omission: "...")
          %p 
            = pluralize review.votes.to_i, "user"
            of
            = pluralize review.evaluations.length, "user"
            found this review useful.
            |
            - if @user_evaluations[review.id] && @user_evaluations[review.id].value == 1.0
              %strong Useful
            - else
              = link_to "Useful", vote_anime_review_path(@anime, review, type: "up"), method: :post
            \/
            - if @user_evaluations[review.id] && @user_evaluations[review.id].value != 1.0
              %strong Not Useful
            - else
              = link_to "Not Useful", vote_anime_review_path(@anime, review, type: "down"), method: :post
            |
            = link_to "Report this review.", "#"

#submit-review.reveal-modal{:class => "[expand, xlarge, large, medium, small]"}
  = render "reviews/new"
